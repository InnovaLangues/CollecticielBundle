{% extends "InnovaCollecticielBundle:Document:documentFormDefault.html.twig" %}

{% block document_body %}

    {% set id_input  ='innova_collecticiel_document_file_form_resource' %}
    {% if documentType == 'url' %}
        {% set id_input  = 'innova_collecticiel_document_file_form_url' %}
    {% elseif documentType == 'text' %}
        {% set id_input  = 'innova_collecticiel_document_file_form_text' %}
    {% elseif documentType == 'file' %}
        {% set id_input  = 'innova_collecticiel_document_file_form_file' %}
    {% endif %}
    <div class="row">
        {{ form_row(form.document,{'id': id_input}) }}
    </div>
    <div class="row dropzone_ressrouceSelected" style="display:none">
        <div class="col-md-3">
            <strong>{{ 'Resource selected'|trans({}, 'innova_collecticiel') }}</strong>
        </div>
        <div class="col-md-6">
            <span class="selected-resource">-</span>
            <strong class="add-document-pending"
                    style="display: none;"> {{ 'loading'|trans({}, 'innova_collecticiel') }}</strong>
        </div>
    </div>
    <div class="row dropzone_noRessourceSelected">
        <div class="col-md-8">
            <div class='input-group col-md-8'>
                <input id='addRessourceInput' type="text" class='form-control'
                       placeholder="{{ 'Choose a resource'|trans({},'innova_collecticiel') }}"></input>
                <span class='input-group-btn'>
                     <a href='#' id='addRessourceButton'
                        class='btn btn-default'>{{ 'Add'|trans({}, 'innova_collecticiel') }}</a>
                </span>
            </div>
        </div>
    </div>

    <div class="row" style="display: none;">
        <div class="col-md-12">
            <div class="form-group pull-right">
                <button id="add-document-sumbit" disabled type="submit" class="btn btn-default">
                    {{ 'Add'|trans({}, 'innova_collecticiel') }}
                </button>
            </div>
        </div>
    </div>

    <script type="text/javascript">
        $(document).ready(function () {
            $('#addRessourceInput').click(function () {
                $('#addRessourceButton').click();
            });
            
            $('#innova_collecticiel_document_file_form_url').focusout(function () {
                var val = $('#innova_collecticiel_document_file_form_url').val();
                if (val.substr(0,7) !== "http://" && val.substr(0,8) !== "https://") {
                    $('#innova_collecticiel_document_file_form_url').val("http://" + val);
                }
            });
            
            $('#innova_collecticiel_document_file_form_url').keypress(function (event) {
                if (event.keyCode === 13) {
                    $('#innova_collecticiel_document_file_form_url').focusout();
                }
            });
        })
    </script>

{% endblock %}

